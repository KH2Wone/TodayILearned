# Cookie VS WebStorage

## Cookie

### 왜 필요한가요?

HTTP 요청은 상태를 갖고 있지 않기 때문입니다.(Stateless)

브라우저가 서버에 요청을 보낼 때 그 요청 자체로는 그 요청이 누구에게서 오는지 알 수 없으니까 쿠키에 정보를 담아서 보내야 서버는 쿠키를 통해 파악할 수 있는 것이죠.
서버와 클라이언트가 지속적으로 데이터를 교환하기 위해 만들어진 겁니다.

서버에 전달하는 매개체, 운송수단 정도로 알고 있으면 좋습니다.

예시로는 '다시 보지 않음' 팝업창, 다크모드, 언어선택이 있습니다.

### 언제 써야하는거죠?

1. **서버가 알아야할 정보가 있을 때**  
   로그인 및 사용자 정보나 접속 시간 등
2. **사용자 맞춤형 페이지를 제공하기 위해**
3. **사용자의 행동 및 패턴을 분석하기 위해**

### 특징

- 임의로 고치는 것이 가능해서 보안에 취약합니다.
- 약 4KB까지의 데이터를 저장할 수 있습니다. (뒤에 나올 웹 스토리지보다 비교적 용량이 작다고 할 수 있습니다)
- 만료 기한을 지정해야합니다.
- 쿠키에 값이 많이 지정되면 네트워크 트래픽이 증가됩니다.


## 쿠키를 보완하기 위해 HTML5부터 등장한 Web Storage

쿠키의 문제점을 보완하기 위해 HTML5에서 추가되었습니다.

웹 데이터를 클라이언트에 저장하기 위해 만들어진 key-value 형식의 저장소입니다.

- 웹 스토리지는 쿠키와 달리 서버에 전송되지 않고 명시적으로만 전송이 가능하여 서버에 부담이 되지 않습니다.
- 쿠키에 비해 용량이 넉넉합니다. (5MB ~ 10MB)
- 요청 시 Headers에 전송하지 않아서 CSRF, 트래픽 문제를 해결할 수 있습니다.
- 개인 정보처럼 중요한 내용은 저장하면 안됩니다.

### Local Storage

사용자가 직접 삭제하지 않는 이상 영구적으로 데이터 보관이 가능합니다.
즉, 브라우저가 종료되어도 보관한다는 뜻입니다.

PC로 접속했다면 해당 PC에, 태블릿이면 그 태블릿에 도메인이 같을 경우에 전역적으로 데이터를 공유합니다.

예시로는 자동로그인이 있습니다.

### Session Storage

세션이 종료되면 데이터는 사라집니다. 즉, 브라우저가 종료되면 삭제됩니다.

도메인이 같더라도 브라우저가 다르면(다른 탭 혹은 다른 브라우저) 브라우저 컨텍스트가 다르기 때문에 각각의 세션 스토리지가 형성되어 데이터 공유가 되지 않습니다.
같은 탭이면서 같은 브라우저일 때에만 접근할 수 있습니다.
예시로는 비로그인한 사람의 장바구니를 예로 들 수 있겠습니다.

<br>

## 내가 이해가 안갔어서 추가하는 번외) 쿠키가 클라이언트에 저장된다는게 이해가 안간다..

쿠키나 웹 스토리지나 둘다 데이터를 저장하는 저장소입니다.
브라우저에서 컨트롤한다는 점에서는 같기 때문에 쿠키가 클라이언트에 저장된다는 것입니다.

쿠키는 서버에 자동으로 넘어가고, 웹 스토리지는 개발자가 꺼내서 담아 보내주어야 한다는 차이가 있습니다.

## 참조

- [[CS] 쿠키, 세션스토리지, 로컬스토리지](https://higher77.tistory.com/102)
- [브라우저 저장소( 로컬 스토리지, 세션 스토리지, 쿠키 )](https://ryuhojin.tistory.com/10?category=1050330)
